@page
@model RegisterModel
@{
	Layout = null;
	ViewData["Title"] = "Đăng ký";
}

<!DOCTYPE html>
<html lang="vi">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>@ViewData["Title"]</title>

	<!-- Bootstrap & custom CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
	<link href="/css/style.css" rel="stylesheet" />
	<style>
		.form-control, .form-select {
			border-radius: 1.5rem;
		}

		.card {
			border-radius: 1.5rem;
			padding: 30px;
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
		}

		.preview-img {
			max-width: 120px;
			border-radius: 50%;
			margin: 10px auto;
			display: block;
		}
	</style>
</head>

<body class="bg-light">
	<div class="container d-flex flex-column justify-content-center align-items-center min-vh-100">
		<div class="row justify-content-center w-100">
			<div class="col-md-6 col-lg-5">
				<div class="card bg-white">
					<form id="registerForm" asp-route-returnUrl="@Model.ReturnUrl" method="post" enctype="multipart/form-data">
						<h3 class="text-center text-primary mb-4">Đăng ký tài khoản</h3>

						<div asp-validation-summary="ModelOnly" class="text-danger mb-3" role="alert"></div>

						<div class="mb-3">
							<label asp-for="Input.FullName" class="form-label">Họ và tên</label>
							<input asp-for="Input.FullName" class="form-control" placeholder="Nguyễn Văn A" autocomplete="name" />
							<span asp-validation-for="Input.FullName" class="text-danger small"></span>
						</div>

						<div class="mb-3">
							<label asp-for="Input.Email" class="form-label">Email</label>
							<input asp-for="Input.Email" class="form-control" placeholder="abc@example.com" autocomplete="username" />
							<span asp-validation-for="Input.Email" class="text-danger small"></span>
						</div>

						<div class="mb-3">
							<label asp-for="Input.Password" class="form-label">Mật khẩu</label>
							<input asp-for="Input.Password" class="form-control" placeholder="Nhập mật khẩu" autocomplete="new-password" />
							<span asp-validation-for="Input.Password" class="text-danger small"></span>
						</div>

						<div class="mb-3">
							<label asp-for="Input.ConfirmPassword" class="form-label">Xác nhận mật khẩu</label>
							<input asp-for="Input.ConfirmPassword" class="form-control" placeholder="Nhập lại mật khẩu" autocomplete="new-password" />
							<span asp-validation-for="Input.ConfirmPassword" class="text-danger small"></span>
						</div>

						<div class="mb-3">
							<label asp-for="Input.Role" class="form-label">Vai trò</label>
							<select asp-for="Input.Role" asp-items="Model.Input.RoleList" class="form-select">
								<option value="">-- Chọn vai trò --</option>
							</select>
							<span asp-validation-for="Input.Role" class="text-danger small"></span>
						</div>

						<div class="mb-3">
							<label asp-for="Input.Avatar" class="form-label">Ảnh đại diện</label>
							<input asp-for="Input.Avatar" type="file" accept="image/*" class="form-control" />
							<span asp-validation-for="Input.Avatar" class="text-danger small"></span>
							<img id="previewAvatar" src="#" class="preview-img d-none" alt="Ảnh xem trước" />
						</div>

						<div class="mb-4">
							<button id="registerSubmit" type="submit" class="btn btn-primary w-100 rounded-pill">🚀 Đăng ký ngay</button>
						</div>

						<div class="text-center">
							<p>Đã có tài khoản? <a asp-page="./Login" class="text-decoration-none fw-bold">Đăng nhập</a></p>
							<a class="btn btn-sm btn-outline-secondary" href="@Url.Action("Index", "Conferences", new { area = "Views" })">⬅ Quay lại trang chủ</a>
					
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>

	@section Scripts {
		<partial name="_ValidationScriptsPartial" />
		<script>
			document.querySelector('#Input_Avatar')?.addEventListener('change', function (e) {
				const preview = document.getElementById('previewAvatar');
				const file = e.target.files[0];
				if (file) {
					const reader = new FileReader();
					reader.onload = function (e) {
						preview.src = e.target.result;
						preview.classList.remove('d-none');
					};
					reader.readAsDataURL(file);
				}
			});
		</script>
	}
</body>
</html>
