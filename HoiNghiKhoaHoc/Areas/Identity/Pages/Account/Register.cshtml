@page
@model RegisterModel
@{
	Layout = null;
	ViewData["Title"] = "Đăng ký";
}

<head>
	<meta charset="utf-8" />
	<title>@ViewData["Title"]</title>
	<link href="/css/style.css" rel="stylesheet" />
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>

<body>
	<div class="container d-flex flex-column justify-content-center align-items-center min-vh-100">
		<div class="row justify-content-center w-100">
			<div class="col-md-4">
				<section>
					<div class="border p-4 shadow-sm" style="border-radius: 1.5rem">
						<form id="registerForm" asp-route-returnUrl="@Model.ReturnUrl" method="post" enctype="multipart/form-data">
							<h2 class="text-center mb-4">Đăng ký</h2>
							<div asp-validation-summary="ModelOnly" class="text-danger" role="alert"></div>

							<!-- Họ và tên -->
							<div class="mb-3">
								<label asp-for="Input.FullName" class="form-label">Họ và tên</label>
								<input asp-for="Input.FullName" class="form-control" autocomplete="name" placeholder="Họ và tên" style="border-radius: 1.5rem" />
								<span asp-validation-for="Input.FullName" class="text-danger"></span>
							</div>

							<!-- Email -->
							<div class="mb-3">
								<label asp-for="Input.Email" class="form-label">Email</label>
								<input asp-for="Input.Email" class="form-control" autocomplete="username" placeholder="Email" style="border-radius: 1.5rem" />
								<span asp-validation-for="Input.Email" class="text-danger"></span>
							</div>

							<!-- Mật khẩu -->
							<div class="mb-3">
								<label asp-for="Input.Password" class="form-label">Mật khẩu</label>
								<input asp-for="Input.Password" class="form-control" autocomplete="new-password" placeholder="Mật khẩu" style="border-radius: 1.5rem" />
								<span asp-validation-for="Input.Password" class="text-danger"></span>
							</div>

							<!-- Xác nhận mật khẩu -->
							<div class="mb-3">
								<label asp-for="Input.ConfirmPassword" class="form-label">Xác nhận mật khẩu</label>
								<input asp-for="Input.ConfirmPassword" class="form-control" autocomplete="new-password" placeholder="Xác nhận mật khẩu" style="border-radius: 1.5rem" />
								<span asp-validation-for="Input.ConfirmPassword" class="text-danger"></span>
							</div>

							<!-- Vai trò -->
							<div class="mb-3">
								<label asp-for="Input.Role" class="form-label">Vai trò</label>
								<select asp-for="Input.Role" asp-items="Model.Input.RoleList" class="form-select" style="border-radius: 1.5rem">
									<option value="">-- Chọn vai trò --</option>
								</select>
								<span asp-validation-for="Input.Role" class="text-danger"></span>
							</div>

							<!-- Avatar -->
							<div class="mb-3">
								<label asp-for="Input.Avatar" class="form-label">Ảnh đại diện</label>
								<input asp-for="Input.Avatar" type="file" class="form-control" accept="image/*" style="border-radius: 1.5rem" />
								<span asp-validation-for="Input.Avatar" class="text-danger"></span>
							</div>

							<!-- Avatar Preview -->
							<div class="mb-3 text-center">
								<img id="previewAvatar" src="#" alt="Ảnh xem trước" class="img-thumbnail d-none" style="max-width: 150px; border-radius: 1.5rem;" />
							</div>

							<!-- Đăng ký -->
							<div class="mb-3">
								<button id="registerSubmit" type="submit" class="w-100 btn btn-lg btn-primary">Đăng ký</button>
							</div>

							<!-- Liên kết -->
							<div class="text-center login-link">
								<p><a class="login-link-item" asp-page="./Login">Đã có tài khoản? Đăng nhập</a></p>
								<a class="btn btn-danger" href="@Url.Action("Index", "Conferences", new { area = "Views" })">Quay lại trang chủ</a>
							</div>
						</form>
					</div>
				</section>
			</div>
		</div>
	</div>
</body>

@section Scripts {
	<partial name="_ValidationScriptsPartial" />
	<script>
		document.querySelector('#Input_Avatar')?.addEventListener('change', function (e) {
			const preview = document.getElementById('previewAvatar');
			const file = e.target.files[0];
			if (file) {
				const reader = new FileReader();
				reader.onload = function (e) {
					preview.src = e.target.result;
					preview.classList.remove('d-none');
				};
				reader.readAsDataURL(file);
			}
		});
	</script>
}
