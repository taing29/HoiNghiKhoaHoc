@using HoiNghiKhoaHoc.Areas.Admin.Models.ViewModels
@model ConferenceEditViewModel

@{
    ViewData["Title"] = "Chỉnh sửa hội nghị";
    Layout = "~/Views/Shared/_Layout_Admin.cshtml";
}

<h2>@ViewData["Title"]</h2>

@* Hiển thị lỗi chung nếu có *@
@Html.ValidationSummary(true, "", new { @class = "text-danger" })

<form asp-area="Admin"
      asp-controller="Conferences"
      asp-action="Update"
      method="post"
      enctype="multipart/form-data">

    @Html.AntiForgeryToken()
    @Html.HiddenFor(m => m.Id)
    @Html.HiddenFor(m => m.ExistingBannerImage)

    <div class="form-group">
        <label asp-for="Title"></label>
        <input asp-for="Title" class="form-control" />
        <span asp-validation-for="Title" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Description"></label>
        <textarea asp-for="Description" class="form-control"></textarea>
        <span asp-validation-for="Description" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Content"></label>
        <textarea asp-for="Content" class="form-control" rows="5"></textarea>
        <span asp-validation-for="Content" class="text-danger"></span>
    </div>

    <div class="form-row">
        <div class="form-group col-md-6">
            <label asp-for="StartDate"></label>
            <input asp-for="StartDate" class="form-control" type="date" />
            <span asp-validation-for="StartDate" class="text-danger"></span>
        </div>
        <div class="form-group col-md-6">
            <label asp-for="EndDate"></label>
            <input asp-for="EndDate" class="form-control" type="date" />
            <span asp-validation-for="EndDate" class="text-danger"></span>
        </div>
    </div>

    <div class="form-group">
        <label asp-for="Location"></label>
        <input asp-for="Location" class="form-control" />
        <span asp-validation-for="Location" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Organizer"></label>
        <input asp-for="Organizer" class="form-control" />
        <span asp-validation-for="Organizer" class="text-danger"></span>
    </div>

    <div class="form-group form-check">
        <input asp-for="IsActive" class="form-check-input" />
        <label asp-for="IsActive" class="form-check-label"></label>
        <span asp-validation-for="IsActive" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="CategoryId">Danh mục</label>
        <select asp-for="CategoryId" class="form-control" asp-items="ViewBag.Categories">
            <option value="">-- Chọn danh mục --</option>
        </select>
        <span asp-validation-for="CategoryId" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label>Ảnh banner hiện tại:</label><br />
        @if (!string.IsNullOrEmpty(Model.ExistingBannerImage))
        {
            <img src="@Url.Content("~/uploads/" + Model.ExistingBannerImage)"
                 width="200" class="img-thumbnail" alt="Banner hiện tại" />
        }
        else
        {
            <p><em>Chưa có ảnh banner</em></p>
        }
    </div>

    <div class="form-group">
        <label asp-for="BannerImage">Thay ảnh mới:</label>
        <input asp-for="BannerImage" type="file" class="form-control-file" />
        <span asp-validation-for="BannerImage" class="text-danger"></span>
    </div>

    <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
    <a asp-area="Admin"
       asp-controller="Conferences"
       asp-action="Index"
       class="btn btn-secondary ml-2">Hủy</a>
</form>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
